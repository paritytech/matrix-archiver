# room: #jam-conformance:matrix.org
# exported: 2025-08-28 03:27 UTC
2025-08-20 15:56 erin: tomusdrw: i've set up the archiver to archive this also, so hopefully will be up starting tomorrow
2025-08-21 06:33 ascriv: https://github.com/davxy/jam-conformance/issues/26 should we not discourage open source implementations (for now)? [edited]
2025-08-21 10:27 oliver.tale-yazdi: I think open source repos are fine. Other implementors are just not supposed to look at it
2025-08-21 10:28 oliver.tale-yazdi: Maybe in their self interest it should be private though since someone else may steal their code and submit it first, but that is up to them to decide IMO [edited]
2025-08-21 10:30 sourabhniyogi: I've never understood when we are required to make everything open-source -- is it after M1 (like, this year =) ), or would it be at the very end?  Or is there some "share with the w3feval team" process?

As the [reports](https://github.com/davxy/jam-conformance/tree/main/fuzz-reports) are clear for > 2/3 of active teams now (omg ... yay!), can we move onto 0.7.0 traces for the rest of the month and start the 0.7.0 fuzzing in first half of September, and then do 0.7.1 traces/fuzzing in the second half? [edited]
2025-08-21 10:32 oliver.tale-yazdi: I think you only need to share the code with the Milestone judges eventually. 
2025-08-21 10:45 sourabhniyogi: Does anyone want to see refining added to the fuzz protocol?
2025-08-21 10:47 ascriv: Sure. But doesnâ€™t that require networking for the erasure coding stuff? 
2025-08-21 10:56 sourabhniyogi: For a auditable work package bundle, it doesn't have to.  We can add this to the fuzzer protocol:

```
--> Work Package Bundle ++ Core Index ++ Segment Root Mappings ++ Timeslot
<-- Work Report
```
2025-08-21 10:57 jaymansfield: > <@sourabhniyogi:matrix.org> Does anyone want to see refining added to the fuzz protocol?

That would be great 
2025-08-21 11:01 sourabhniyogi: Anyone see the need to add more to the above than 1+2, or have a desire to add this in 0.7.0 vs 0.7.1?  There is this ancestors detail I'm wondering what will happen when
2025-08-21 11:02 ascriv: Iâ€™m ok with whatever the evaluators decide, but clarity/a roadmap would be nice 
2025-08-21 11:18 clearloop: I hope polkajam can join the discuss which can make our time spent more efficient, for example, the testing data format
2025-08-21 11:26 sourabhniyogi: I think the expectation is that we all become evaluators, and we earn our fellowship stripes by suggesting the changes we want ... like, how do you want to see ancestors in the data
2025-08-21 11:26 davxy: Your time schedule looks realistic and reasonable
2025-08-21 11:36 davxy: 
This seems doable. Maybe you could open a PR to extend the fuzzer protocol?

Right now, I am focused on fixing issues in the fuzzer and getting stuff ready for version 0.7.0 (test vectors first).

The refinement extension could realistically land in 0.7.1 instead.  
For 0.7.0, the fuzzer protocol should already be extended with:  
- supported-features handshake during PeerInfo message exchange  
- ancestors set  

If the target supports refinement, that capability could be included as part of the features exchange.



2025-08-21 11:37 sourabhniyogi: Is refining successfully part of M1 conformance?  M2?  
2025-08-21 11:38 sourabhniyogi: I am happy to do a refining extension PR targeting 0.7.1 and try it out with everyone here in Sept =)
2025-08-21 11:40 sourabhniyogi: I'll primarily just extend this README.md here https://github.com/davxy/jam-conformance/blob/main/fuzz-proto/README.md unless you suggest something else?
2025-08-21 11:44 davxy: From a technical standpoint, M1 is doing block importing, so as far as I can tell, the answer is no.
2025-08-21 11:54 sourabhniyogi: Can we consider the 0.6.7 fuzzer "done" (which allows other teams to roll in) or are you going to go through another few waves of 0.6.7 for the next 7-10 days, like the gas accounting wave?
2025-08-21 11:57 sourabhniyogi: For others doing fuzzers, what else should be addressed?  I think you had a task list to share maybe
2025-08-21 12:09 jaymansfield: Seems like this should work. I might attempt to build my own refine fuzzer actually as I'm getting close to finishing my recompiler. Will use the same refine arguments when I get to it next.
2025-08-21 16:03 r2rtnl: JAM Prize rules #14 and #15 appear to favor using a public GitHub repo as evidence of organic development.
Rule #7 seems reasonably interpreted as: â€œdonâ€™t look; and if you did look, disclose it publicly.â€
2025-08-21 16:16 oliver.tale-yazdi: Rule #16 also explicitly allows private repos. So not sure if either is favoured
2025-08-21 16:20 r2rtnl: Agreed â€” Iâ€™ve just shared an explanation of why TurboJam chose to go the open-source route.
2025-08-21 16:20 ascriv: Iâ€™m pretty sure private meant off-GitHub according to gavâ€™s comments last October 
2025-08-21 16:21 ascriv: image_D9A1B8B1-C051-4866-9047-C48BBDBB137B_1755793257.png
2025-08-21 16:21 ascriv: But Iâ€™m in the process of confirming this with the fellowship, can share once I hear 
2025-08-21 16:23 ascriv: â€œIf you donâ€™t want to use GitHub (private or public), add commits timestamped on a blockchainâ€
2025-08-21 16:23 oliver.tale-yazdi: But also depends on how one uses it. Just pushing commits to public GibHub wont help, it will need to be Merge Requests since they carry timestamps.
2025-08-21 16:26 oliver.tale-yazdi: Yea I am doing this to avoid any controversy later on: https://github.com/JamBrains/remark-commit (i already posted this recently but nobody seems to want to use it ðŸ˜†)
2025-08-21 16:27 ascriv: Itâ€™s definitely best to do something like OTS or your remark tool regardless. They should have required everyone do this no matter if on GitHub or off imo  [edited]
2025-08-21 16:28 ascriv: Bc as itâ€™s written and as gav explained, it seems just being on github suffices
2025-08-21 17:41 erin: archive is up: https://paritytech.github.io/matrix-archiver/archive/_21ksYpYHcVftKsUAsdMa_3Amatrix.org/index.html

cc tomusdrw 
2025-08-21 17:45 davxy: Two new highly controversial reports: 1755796851 1755796995
2025-08-21 17:46 davxy: I guess after these two we can start with 0.7.0 :-)
2025-08-21 17:46 davxy: https://github.com/davxy/jam-conformance/tree/main/fuzz-reports
2025-08-21 17:49 davxy: (the traces passed by all teams were removed from the table)
2025-08-22 14:10 danicuki: I am trying to match the preimage error because of this: https://matrix.to/#/!ddsEwXlCWnreEGuqXZ:polkadot.io/$ps8N0jq66pBJG1o26Z5XUGyU23QETifiYuVaaiiypIc?via=polkadot.io&via=matrix.org&via=parity.io

It also affects test vector https://github.com/davxy/jam-test-vectors/blob/master/stf/preimages/tiny/preimage_not_needed-1.json

2025-08-22 16:59 rustybot: > <@danicuki:matrix.org> I am trying to match the preimage error because of this: https://matrix.to/#/!ddsEwXlCWnreEGuqXZ:polkadot.io/$ps8N0jq66pBJG1o26Z5XUGyU23QETifiYuVaaiiypIc?via=polkadot.io&via=matrix.org&via=parity.io
> 
> It also affects test vector https://github.com/davxy/jam-test-vectors/blob/master/stf/preimages/tiny/preimage_not_needed-1.json
> 

Looks like you've got your answer in the other channel?
2025-08-22 17:44 danicuki: If that answer is correct than I still can't understand why some of the fuzzer cases shouldn't raise preimage_not_needed error [edited]
2025-08-22 17:46 danicuki: Cases 1755530896, 1755530728,1755531265, 1755620371
2025-08-22 17:51 ascriv: Can you provide a deeper analysis/argument for why one of these cases should error? Itâ€™s always possible we all have the same mind virus 
2025-08-22 17:56 danicuki: In all these cases

d[s]_l[(h,l)] = null 

Which according to 12.38, should fail the block. 
2025-08-22 17:58 ascriv: Iâ€™ll take a look but I think it could be because 12.38 is a definition of R, not a condition that must be true 
2025-08-22 17:58 ascriv: If that doesnâ€™t explain it then Iâ€™ll look deeper later 
2025-08-22 17:59 danicuki: All E_P must satisfy R
2025-08-22 18:01 ascriv: Right, let me look now then
2025-08-22 18:05 ascriv: I checked 1755530896, my service 2494444674 indeed does not have the preimage in the extrinsic but it does have a [] in the historical lookup  
2025-08-22 18:05 ascriv: The key for the historical lookup begins with 0x92115b..
2025-08-22 18:06 ascriv: And I see it in the pre state for â€¦.008.json for this test vector 
2025-08-22 18:06 ascriv: Value 0x00 which corresponds with empty list
2025-08-22 18:24 danicuki: I will double check on my side but I think I know what we are doing wrong. 
2025-08-23 11:22 davxy: **0.7.0 test vectors are up:**  
https://github.com/davxy/jam-test-vectors/pull/90

2025-08-23 17:54 jaymansfield: Another set of 0.7.0 safrole vectors if anyone is interested: https://github.com/javajamio/javajam-trace
2025-08-24 07:31 davxy: âš ï¸ https://github.com/davxy/jam-test-vectors/pull/90#issuecomment-3217905803
2025-08-24 07:33 davxy: For tiny we're using G_T = 20_000_000 and not 3_500_000_000 . That is why we call into accumulate twice in preimages/00000008.bin
As I described in the comment, I think a different value for tiny is reasonable to trigger interesting cases
2025-08-24 07:33 davxy: if there are no objections I'll open a PR in jamcha.in and set this as the value for G_T in tiny config
2025-08-24 08:16 davxy: https://github.com/JamBrains/jam-docs/pull/59
2025-08-24 11:13 prematurata: hey @davxy I just found out about the sbrk note in the traces readme https://github.com/davxy/jam-test-vectors/tree/v0.7.0/traces

besides the sbrk implementation the RAM code looks a bit off to me.

For example in A.42 the Writeable section starts at 2Zz + Z(|o|) while in the code there it seems to end there
2025-08-24 11:18 davxy: Was written by [@sourabhniyogi:matrix.org](https://matrix.to/#/@sourabhniyogi:matrix.org)some time ago Feel free to open a PR
2025-08-24 11:18 prematurata: ah ok maybe at that time the gp was different :)
2025-08-24 11:20 davxy: Honestly I didn't went through that go code LOL
2025-08-24 11:20 prematurata: npnp thanks for clarifying
2025-08-24 11:27 davxy: I donâ€™t feel like Iâ€™ve clarified anything :-) Iâ€™ll check that section out
2025-08-24 11:28 prematurata: well it's clear that there MAY be an error :)
2025-08-24 17:05 sourabhniyogi: Yes, it deserves an update -- the 0.6.7 fuzz traces did a thorough job of showing how its out of date (64k, read vs write OOB) -- I'm not aware of really great SBRK / heap testing expansion anywhere, and the "s" component [stack] remains elusive and entirely untouched so far as I can tell in addition to the "h" [heap] of SBRK which has not been fuzzed much.  

It would be ideal if the next 0.7.2+ fuzzing series attacked this fully and somehow incorporated "picoalloc" which I gather is the replacement to SBRK (the "h").  I am wondering if its useful to really go crazy with fuzz testing of SBRK because its going to be replaced.  We can keep busy with outeraccumulate in 0.7.0 and transfer in 0.7.1 the meantime =).   [edited]
2025-08-25 07:52 dakkk: Where can I find the source code of the service used for the tests? My implementation is raising a panic from services/bootstrap-service/src/lib.rs in two traces
  â†³ 2025-08-25 10:13 oliver.tale-yazdi: I think you can get it with `cargo clone jam-bootstrap-service`, at least that code matched with the logs that we saw when running the test vectors
  â†³ 2025-08-25 11:17 dakkk: thank you
2025-08-25 14:57 emielsebastiaan: davxy: Potential ASN error: https://github.com/davxy/jam-test-vectors/issues/93
Please review.
2025-08-26 06:50 davxy: https://github.com/davxy/jam-test-vectors/pull/94
2025-08-26 07:02 emielsebastiaan: In the office in an hour. Let me check then. It is simply the reordering. New order: i, x, z, e for both CoreActivityRecord and ServiceActivityRecord. [edited]
2025-08-26 08:24 davxy: @room Could you please check these vectors https://github.com/davxy/jam-test-vectors/pull/94 before I proceed with merging?
STF and traces. Ty

  â†³ 2025-08-26 08:37 0xjunha: fastroll passes all stf/traces
  â†³ 2025-08-26 12:10 jaymansfield: Looks good.
2025-08-26 08:32 dakkk: it works for me, and now I pass all the tests either
2025-08-26 08:45 arjanz: Traces and STF are passing
2025-08-26 08:53 vinsystems: vinwolf passes all stf and traces as well
2025-08-26 09:36 ascriv: Jamzilla passes as well
2025-08-26 10:59 danicuki: Do we already have fuzzer for 0.7.0? 
2025-08-26 11:03 danicuki: Jamixir passes all 0.7.0 traces and test vectors. 
2025-08-26 11:06 danicuki: We are still struggling with two fuzzer cases on 0.6.7 - Could anyone please provide the PVM traces for 1755531265 and 1755796995 fuzz cases (0.6.7)? 
  â†³ 2025-08-26 16:20 clearloop: 1755531265.log
  â†³ 2025-08-26 16:20 clearloop: 1755796995.log
  â†³ 2025-08-26 16:21 clearloop: hope these help â¬†ï¸ [edited]
  â†³ 2025-08-26 23:49 danicuki: â¤ï¸
  â†³ 2025-08-27 19:23 danicuki: clearloop | SpaceJam: I have a doubt about your logs:

```
2025-08-27 00:19:42 TRACE stf:accumulate: pos=26517  Ecalli               gas=9997503 regs=[804, 4278056528, 17, 16, 4278056271, 206752, 70, 2, 66858, 4, 206752, 57, 8]
2025-08-27 00:19:42 DEBUG stf:accumulate: calling host call 100
2025-08-27 00:19:42  INFO program: Bootstrap Service Accumulate, 0h @8 $18446744073709003931 target="boot"
2025-08-27 00:19:42 TRACE stf:accumulate: pos=26519  Fallthrough          gas=9997502 regs=[804, 4278056528, 17, 16, 4278056271, 206752, 70, 0, 66858, 4, 206752, 57, 8]
```
the host call is a log, so it should not change r7 from 2 to 0
the next call is a fallthrough, which should also not change r7 from 2 to 0

So why is your r7 changed to 0?  

  â†³ 2025-08-27 23:25 clearloop: good catch! we have a wrap of host calls, 0 means the host call executed successfully ðŸ¤¦â€â™‚ï¸ this could be confusing but it should not be the root case since `r7` is commonly used as exit status, and it is actually ignored by the log host call in the program, (e.g. it will be override by other operations without getting loaded )

while you can pass the traces in the test vectors, I believe the bug in the fuzz tests are in `host call` / `memory op` / `encoding stuffs`
2025-08-26 11:25 davxy: Polkajam has it; I'll provide some reports in the next days
2025-08-26 14:41 emielsebastiaan: davxy afk -> 28 Aug: https://github.com/w3f/jamtestvectors/pull/55#issuecomment-3224458898
2025-08-26 15:04 emielsebastiaan: https://github.com/paritytech/polkajam-releases/releases/tag/v0.1.25

CoreVM & DOOM included.  [edited]
2025-08-26 18:48 prematurata: <del>~Hello can someone provide tracelog for storage 13 in 0.7.0? I am struggling to pass that one~</del> [edited]
2025-08-27 14:10 yu2c: davxy afk -> 28 Aug: 
I'm curious about some issues of the jam-test-vector/stf/assurances (v0.7.0)
From [README](https://github.com/davxy/jam-test-vectors/blob/master/stf/assurances/README.md):
1. the "[assurances_for_stale_report-1](https://github.com/davxy/jam-test-vectors/blob/master/stf/assurances/tiny/assurances_for_stale_report-1.json)" pins red dot (which implies error code exists), but in the file, there's no error code but has ok with reports (which implies green dot)

2. Why "[no_assurances_with_stale_report-1](https://github.com/davxy/jam-test-vectors/blob/master/stf/assurances/tiny/no_assurances_with_stale_report-1.json)" doesn't have output? (we don't output timeout reports?)
> Stale work report assignment is removed (but not returned in the output).
